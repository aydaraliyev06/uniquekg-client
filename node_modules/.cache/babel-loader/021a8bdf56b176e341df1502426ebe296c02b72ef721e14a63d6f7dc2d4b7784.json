{"ast":null,"code":"import _regeneratorRuntime from\"C:/VScode/RC/uniquekg/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/VScode/RC/uniquekg/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/VScode/RC/uniquekg/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import'./Auth.css';import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHOP_ROUTE}from'../utils/consts';import{useLocation,useNavigate}from'react-router-dom';import{login,registration}from'../http/userAPI';import{observer}from'mobx-react-lite';import{Context}from'../index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=observer(function(){var _useContext=useContext(Context),user=_useContext.user;var location=useLocation();var history=useNavigate();var isLogin=location.pathname===LOGIN_ROUTE;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isLogin){_context.next=7;break;}_context.next=4;return login(email,password);case 4:data=_context.sent;_context.next=10;break;case 7:_context.next=9;return registration(email,password);case 9:data=_context.sent;case 10:user.setUser(user);user.setIsAuth(true);history(SHOP_ROUTE);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);alert(_context.t0.response.data.message);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"auth-box\",className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mx-auto mt-3 mb-0\",children:isLogin?'Авторизация':'Регистрация'}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\",className:\"mt-1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",className:\"mt-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[isLogin?/*#__PURE__*/_jsx(\"a\",{className:\"text-decoration-underline text-secondary mt-2\",href:REGISTRATION_ROUTE,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}):/*#__PURE__*/_jsx(\"a\",{className:\"text-decoration-underline text-secondary mt-2\",href:LOGIN_ROUTE,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return click();},type:\"button\",className:\"btn btn-success mt-3\",children:isLogin?'Войти':'Регистрация'})]})]})]})});});export default Auth;","map":{"version":3,"names":["React","useContext","useState","LOGIN_ROUTE","REGISTRATION_ROUTE","SHOP_ROUTE","useLocation","useNavigate","login","registration","observer","Context","jsx","_jsx","jsxs","_jsxs","Auth","_useContext","user","location","history","isLogin","pathname","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","click","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","sent","setUser","setIsAuth","t0","alert","response","message","stop","apply","arguments","id","className","children","class","value","onChange","e","target","placeholder","type","href","onClick"],"sources":["C:/VScode/RC/uniquekg/frontend/src/pages/Auth.jsx"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport './Auth.css';\r\nimport { LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE } from '../utils/consts';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { login, registration } from '../http/userAPI';\r\nimport { observer } from 'mobx-react-lite';\r\nimport { Context } from '../index';\r\n\r\nconst Auth = observer(() => {\r\n    const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const history = useNavigate()\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const click = async() => {\r\n        try {\r\n            let data;\r\n            if(isLogin){\r\n                data = await login(email, password)\r\n            }else{\r\n                data = await registration(email, password)\r\n            }\r\n            user.setUser(user)\r\n            user.setIsAuth(true)\r\n            history(SHOP_ROUTE)\r\n        } catch(e) {\r\n            alert(e.response.data.message)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div id='auth-box' className='d-flex justify-content-center align-items-center'>\r\n            <div class=\"card\">\r\n                <h1 className='mx-auto mt-3 mb-0'>{isLogin ? 'Авторизация' : 'Регистрация'}</h1>\r\n                <div class=\"card-body d-flex flex-column\">\r\n                    <input value={email} onChange={e=>setEmail(e.target.value)} placeholder='Введите ваш email...' className='mt-1' />\r\n                    <input type='password' value={password} onChange={e=>setPassword(e.target.value)} placeholder='Введите ваш пароль...' className='mt-3' />\r\n                    <div className='d-flex justify-content-between'>\r\n                        {\r\n                            isLogin ?\r\n                            <a className='text-decoration-underline text-secondary mt-2' href={REGISTRATION_ROUTE}>Зарегистрироваться</a>\r\n                            :\r\n                            <a className='text-decoration-underline text-secondary mt-2' href={LOGIN_ROUTE}>Войти</a>\r\n                        }\r\n                        <button onClick={()=>click()} type=\"button\" className='btn btn-success mt-3'>\r\n                            {isLogin ? 'Войти' : 'Регистрация'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default Auth;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}